/*! JRoll v2.6.1 ~ (c) 2015-2017 Author:BarZu Git:https://github.com/chjtx/JRoll Website:http://www.chjtx.com/JRoll/ */
(function(d,j,f){var p;var r="2.6.1";var m=d.requestAnimationFrame||d.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};var i=j.createElement("div").style;var k={};var q=navigator.userAgent.toLowerCase();var o=(function(){var w=["OT","msT","MozT","webkitT","t"];var e;var v=w.length;while(v--){e=w[v]+"ransform";if(e in i){return w[v]}}})();var t={TSF:o+"ransform",TSD:o+"ransitionDuration",TFO:o+"ransformOrigin",isAndroid:/android/.test(q),isIOS:/iphone|ipad/.test(q),isMobile:/mobile|phone|android|pad/.test(q),translateZ:(function(v){var e;if(v){e=v+"Perspective" in i}else{e="perspective" in i}return e?" translateZ(0px)":""})(o.substr(0,o.length-1)),computeTranslate:function(w,v){var e=0;var A=0;var z;while(w){z=d.getComputedStyle(w)[t.TSF].replace(/matrix\(|\)/g,"").split(", ");e+=parseInt(z[4])||0;A+=parseInt(z[5])||0;w=w.parentElement;if(w===v){w=null}}return{x:e,y:A}},computePosition:function(v,e){var x=0;var w=0;while(v){x+=v.offsetLeft;w+=v.offsetTop;v=v.offsetParent;if(v===e){v=null}}return{left:x,top:w}},moveTo:function(w,E,D,z,I,v){var B=0;var A=0;var K;var H;var J=1;var G;var F;var C;var L;L=/translate\(([-\d.]+)px,\s+([-\d.]+)px\)\s+(?:translateZ\(0px\)\s+)?scale\(([\d.]+)\)/.exec(w.style[t.TSF]);if(L){B=Number(L[1]);A=Number(L[2]);J=Number(L[3])}C=z||17;G=(E-B)/(C/17);F=(D-A)/(C/17);K=B;H=A;function e(){C=C-17;if(C<17){K=E;H=D}else{K=parseInt(K+G,10);H=parseInt(H+F,10)}w.style[t.TSF]="translate("+K+"px, "+H+"px)"+t.translateZ+" scale("+J+")";if(v){v.x=K;v.y=H;v._execEvent("scroll");if(v.scrollBtnX){v._runScrollBarX()}if(v.scrollBtnY){v._runScrollBarY()}}if(C>0&&!(K===E&&H===D)){m(e)}else{if(typeof I==="function"){I()}}}e()},findScroller:function(e,v){var w;if(v||!(e.tagName==="TEXTAREA"&&e.scrollHeight>e.offsetHeight)){while(e!==j){w=e.getAttribute("jroll-id");if(w){return k[w]}e=e.parentNode}}return null},findAllJRolls:function(v,w){var e=[];var x;if(w||!(v.tagName==="TEXTAREA"&&(v.scrollHeight>v.clientHeight)&&(v.scrollTop>0&&v.scrollTop<v.scrollHeight-v.clientHeight))){while(v!==j){x=v.getAttribute("jroll-id");if(x){e.push(k[x])}v=v.parentNode}}return e}};function n(x){var w=t.findAllJRolls(x.target);var v=w.length;if(p.jrollActive&&!p.jrollActive.options.zoom&&x.touches&&x.touches.length>1){return}if(v){while(v--){if(w[v].moving){x.preventDefault();w[v]._endAction()}}p.jrollActive=w[0];p.jrollActive._start(x)}else{if(p.jrollActive){p.jrollActive._end(x)}}}function u(w){if(p.jrollActive){var v=j.activeElement;if(p.jrollActive.options.preventDefault){w.preventDefault()}if(t.isMobile&&p.jrollActive.options.autoBlur&&(v.tagName==="INPUT"||v.tagName==="TEXTAREA")){v.blur()}p.jrollActive._move(w)}}function a(v){if(p.jrollActive){p.jrollActive._end(v)}}function b(){setTimeout(function(){for(var e in k){k[e].refresh().scrollTo(k[e].x,k[e].y,200)}},600)}function g(w){var v=t.findScroller(w.target);if(v){v._wheel(w)}}var c=false;try{var h=Object.defineProperty({},"passive",{get:function(){c=true}});d.addEventListener("test",null,h)}catch(s){}function l(e,v){j.addEventListener(e,v,c?{passive:false}:false)}l(t.isMobile?"touchstart":"mousedown",n);l(t.isMobile?"touchmove":"mousemove",u);l(t.isMobile?"touchend":"mouseup",a);if(t.isMobile){l("touchcancel",a)}else{l(/firefox/.test(q)?"DOMMouseScroll":"mousewheel",g)}d.addEventListener("resize",b);d.addEventListener("orientationchange",b);p=function(v,e){var w=this;w.wrapper=typeof v==="string"?j.querySelector(v):v;w.scroller=e&&e.scroller?(typeof e.scroller==="string"?j.querySelector(e.scroller):e.scroller):w.wrapper.children[0];if(w.scroller.jroll){w.scroller.jroll.refresh();return w.scroller.jroll}else{w.scroller.jroll=w}this._init(v,e)};p.version=r;p.utils=t;p.jrollMap=k;p.prototype={_init:function(w,e){var x=this;x.wrapperOffset=t.computePosition(x.wrapper,j.body);x.id=(e&&e.id)||x.scroller.getAttribute("jroll-id")||"jroll_"+f.random().toString().substr(2,8);x.scroller.setAttribute("jroll-id",x.id);k[x.id]=x;x.options={scrollX:false,scrollY:true,scrollFree:false,minX:null,maxX:null,minY:null,maxY:null,zoom:false,zoomMin:1,zoomMax:4,zoomDuration:400,bounce:true,scrollBarX:false,scrollBarY:false,scrollBarFade:false,preventDefault:true,momentum:true,autoStyle:true,autoBlur:true,edgeRelease:true};for(var v in e){if(v!=="scroller"){x.options[v]=e[v]}}if(x.options.autoStyle){if(d.getComputedStyle(x.wrapper).position==="static"){x.wrapper.style.position="relative";x.wrapper.style.top="0";x.wrapper.style.left="0"}x.wrapper.style.overflow="hidden";x.scroller.style.minHeight="100%"}if(x.options.zoom){x.scroller.style.touchAction="none"}x.x=0;x.y=0;x.s=null;x.scrollBarX=null;x.scrollBarY=null;x._s={startX:0,startY:0,lastX:0,lastY:0,endX:0,endY:0};x._z={spacing:0,scale:1,startScale:1};x._event={scrollStart:[],scroll:[],scrollEnd:[],zoomStart:[],zoom:[],zoomEnd:[],refresh:[],touchEnd:[]};x.refresh(true)},enable:function(){var e=this;e.scroller.setAttribute("jroll-id",e.id);return e},disable:function(){var e=this;e.scroller.removeAttribute("jroll-id");return e},destroy:function(){var v=this;delete k[v.id];delete v.scroller.jroll;if(v.scrollBarX){v.wrapper.removeChild(v.scrollBarX)}if(v.scrollBarY){v.wrapper.removeChild(v.scrollBarY)}v.disable();v.scroller.style[t.TSF]="";v.scroller.style[t.TSD]="";v.scroller.style[t.TFO]="";v.prototype=null;for(var e in v){if(v.hasOwnProperty(e)){delete v[e]}}},call:function(x,w){var v=this;v.scrollTo(v.x,v.y);p.jrollActive=x;if(w){x._start(w)}return x},refresh:function(e){var z=this;var w=d.getComputedStyle(z.wrapper);var v=d.getComputedStyle(z.scroller);var y;var x;var B;var A;var C;var D;z.wrapperWidth=z.wrapper.clientWidth;z.wrapperHeight=z.wrapper.clientHeight;z.scrollerWidth=f.round(z.scroller.offsetWidth*z._z.scale);z.scrollerHeight=f.round(z.scroller.offsetHeight*z._z.scale);y=parseInt(w["padding-left"])+parseInt(w["padding-right"]);x=parseInt(w["padding-top"])+parseInt(w["padding-bottom"]);B=parseInt(v["margin-left"])+parseInt(v["margin-right"]);A=parseInt(v["margin-top"])+parseInt(v["margin-bottom"]);z.minScrollX=z.options.minX===null?0:z.options.minX;z.maxScrollX=z.options.maxX===null?z.wrapperWidth-z.scrollerWidth-y-B:z.options.maxX;z.minScrollY=z.options.minY===null?0:z.options.minY;z.maxScrollY=z.options.maxY===null?z.wrapperHeight-z.scrollerHeight-x-A:z.options.maxY;if(z.minScrollX<0){z.minScrollX=0}if(z.minScrollY<0){z.minScrollY=0}if(z.maxScrollX>0){z.maxScrollX=0}if(z.maxScrollY>0){z.maxScrollY=0}z._s.endX=z.x;z._s.endY=z.y;if(z.options.scrollBarX){if(!z.scrollBarX){C=z._createScrollBar("jroll-xbar","jroll-xbtn",false);z.scrollBarX=C[0];z.scrollBtnX=C[1]}z.scrollBarScaleX=z.wrapper.clientWidth/z.scrollerWidth;D=f.round(z.scrollBarX.clientWidth*z.scrollBarScaleX);z.scrollBtnX.style.width=(D>8?D:8)+"px";z._runScrollBarX()}else{if(z.scrollBarX){z.wrapper.removeChild(z.scrollBarX);z.scrollBarX=null}}if(z.options.scrollBarY){if(!z.scrollBarY){C=z._createScrollBar("jroll-ybar","jroll-ybtn",true);z.scrollBarY=C[0];z.scrollBtnY=C[1]}z.scrollBarScaleY=z.wrapper.clientHeight/z.scrollerHeight;D=f.round(z.scrollBarY.clientHeight*z.scrollBarScaleY);z.scrollBtnY.style.height=(D>8?D:8)+"px";z._runScrollBarY()}else{if(z.scrollBarY){z.wrapper.removeChild(z.scrollBarY);z.scrollBarY=null}}if(!e){z._execEvent("refresh")}return z},scale:function(e){var v=this;var w=parseFloat(e);if(!isNaN(w)){v.scroller.style[t.TFO]="0 0";v._z.scale=w;v.refresh()._scrollTo(v.x,v.y);v.scrollTo(v.x,v.y,400)}return v},_wheel:function(w){var v=this;var x=w.wheelDelta||-(w.detail/3)*120;if(v.options.scrollY||v.options.scrollFree){v.scrollTo(v.x,v._compute(v.y+x,v.minScrollY,v.maxScrollY))}},_runScrollBarX:function(){var v=this;var e=f.round(-1*v.x*v.scrollBarScaleX);v._scrollTo.call({scroller:v.scrollBtnX,_z:{scale:1}},e,0)},_runScrollBarY:function(){var e=this;var v=f.round(-1*e.y*e.scrollBarScaleY);e._scrollTo.call({scroller:e.scrollBtnY,_z:{scale:1}},0,v)},_createScrollBar:function(v,e,z){var y=this;var x;var w;x=j.createElement("div");w=j.createElement("div");x.className=v;w.className=e;if(this.options.scrollBarX===true||this.options.scrollBarY===true){if(z){x.style.cssText="position:absolute;top:2px;right:2px;bottom:2px;width:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleX(.5);transform: scaleX(.5);";w.style.cssText="background:rgba(0,0,0,.4);position:absolute;top:0;left:0;right:0;border-radius:2px;"}else{x.style.cssText="position:absolute;left:2px;bottom:2px;right:2px;height:6px;overflow:hidden;border-radius:2px;-webkit-transform: scaleY(.5);transform: scaleY(.5);";w.style.cssText="background:rgba(0,0,0,.4);height:100%;position:absolute;left:0;top:0;bottom:0;border-radius:2px;"}}if(y.options.scrollBarFade){x.style.opacity=0}x.appendChild(w);y.wrapper.appendChild(x);return[x,w]},_fade:function(v,w){var e=this;if(e.fading&&w>0){w=w-25;if(w%100===0){v.style.opacity=w/1000}}else{return}m(e._fade.bind(e,v,w))},on:function(v,w){var e=this;switch(v){case"scrollStart":e._event.scrollStart.push(w);break;case"scroll":e._event.scroll.push(w);break;case"scrollEnd":e._event.scrollEnd.push(w);break;case"zoomStart":e._event.zoomStart.push(w);break;case"zoom":e._event.zoom.push(w);break;case"zoomEnd":e._event.zoomEnd.push(w);break;case"refresh":e._event.refresh.push(w);break;case"touchEnd":e._event.touchEnd.push(w);break}return e},_execEvent:function(x,y){var w=this;var v=w._event[x].length-1;for(;v>=0;v--){w._event[x][v].call(w,y)}},_compute:function(x,v,e){var w=this;if(x>v){if(w.options.bounce&&(x>(v+10))){return f.round(v+((x-v)/4))}else{return v}}if(x<e){if(w.options.bounce&&(x<(e-10))){return f.round(e+((x-e)/4))}else{return e}}return x},_scrollTo:function(e,v){this.scroller.style[t.TSF]="translate("+e+"px, "+v+"px)"+t.translateZ+" scale("+this._z.scale+")"},scrollTo:function(e,D,B,w,C,A,v){var z=this;if(!w){if(e>=z.minScrollX){z.x=z.minScrollX;if(v){z._s.startX=v[0].pageX;z._s.endX=z.minScrollX}}else{if(e<=z.maxScrollX){z.x=z.maxScrollX;if(v){z._s.startX=v[0].pageX;z._s.endX=z.maxScrollX}}else{z.x=e}}if(D>=z.minScrollY){z.y=z.minScrollY;if(v){z._s.startY=v[0].pageY;z._s.endY=z.minScrollY}}else{if(D<=z.maxScrollY){z.y=z.maxScrollY;if(v){z._s.startY=v[0].pageY;z._s.endY=z.maxScrollY}}else{z.y=D}}}else{z.x=e;z.y=D}if(!A){z._s.endX=z.x;z._s.endY=z.y}if(B){t.moveTo(z.scroller,z.x,z.y,B,C,A?z:null)}else{z._scrollTo(z.x,z.y);if(A){z._execEvent("scroll",v&&v[0])}if(typeof C==="function"){C()}}if(z.scrollBtnX){z._runScrollBarX()}if(z.scrollBtnY){z._runScrollBarY()}return z},scrollToElement:function(A,e,v,E){var B=this;var z=typeof A==="string"?B.scroller.querySelector(A):A;if(z instanceof HTMLElement){var w=t.computePosition(z,B.scroller);var F=t.computeTranslate(z,B.scroller);var D=-(w.left+F.x);var C=-(w.top+F.y);return B.scrollTo(D,C,e,v,E)}},_endAction:function(){var e=this;e._s.endX=e.x;e._s.endY=e.y;e.moving=false;if(e.options.scrollBarFade&&!e.fading){e.fading=true;if(e.scrollBarX){e._fade(e.scrollBarX,2000)}if(e.scrollBarY){e._fade(e.scrollBarY,2000)}}e._execEvent("scrollEnd")},_stepBounce:function(z,y){var x=this;var e=Date.now();var v=e-z;var w=0;if(v>0){x.speed=x.speed-v*0.008;w=f.round(x.speed*v*y*0.005);if(x.speed<=0||w<=0||isNaN(w)){x.bouncing=false;x.scrollTo(x.x,x.y,200,false,function(){x._endAction()},true);return}if(x.s==="scrollY"||x.s==="scrollFree"){x.y=x.y+w*x.directionY}if(x.s==="scrollX"||x.s==="scrollFree"){x.x=x.x+w*x.directionX}x.scrollTo(x.x,x.y,0,true,null,true);m(x._stepBounce.bind(x,e,y-1))}},_x:function(v){var e=this;var w=e.directionX*v;if(!isNaN(w)){e.x=e.x+w;if(e.x>=e.minScrollX||e.x<=e.maxScrollX){if(e.options.bounce){e.bouncing=true}else{e.moving=false}}}},_y:function(v){var e=this;var w=e.directionY*v;if(!isNaN(w)){e.y=e.y+w;if(e.y>=e.minScrollY||e.y<=e.maxScrollY){if(e.options.bounce){e.bouncing=true}else{e.moving=false}}}},_xy:function(w){var v=this;var e=f.round(v.cosX*w);var z=f.round(v.cosY*w);if(!isNaN(e)&&!isNaN(z)){v.x=v.x+e;v.y=v.y+z;if((v.x>=v.minScrollX||v.x<=v.maxScrollX)&&(v.y>=v.minScrollY||v.y<=v.maxScrollY)){v.moving=false}}},_step:function(y){var x=this;var e=Date.now();var v=e-y;var w=0;if(!x.id){return}if(x.bouncing){m(x._stepBounce.bind(x,y,20));return}if(!x.moving){x._endAction();return}if(v>0){x.speed=x.speed-v*(x.speed>1.2?0.001:(x.speed>0.6?0.0008:0.0006));w=f.round(x.speed*v);if(x.speed<=0||w<=0){x._endAction();return}y=e;x._do(w);x.scrollTo(x.x,x.y,0,x.options.bounce&&!x.options.scrollFree,null,true)}m(x._step.bind(x,y))},_doScroll:function(y,x){var w=this;var v;w.distance=y;if(w.options.bounce){w.x=w._compute(w.x,w.minScrollX,w.maxScrollX);w.y=w._compute(w.y,w.minScrollY,w.maxScrollY)}w.scrollTo(w.x,w.y,0,w.options.bounce,null,true,(x.touches||[x]));if(x&&x.touches&&w.options.edgeRelease){v=x.touches[0].pageY;if(v<=10||v>=d.innerHeight-10){w._end(x)}}},_yTextarea:function(x){var v=this;var w=x.target;if(w.tagName==="TEXTAREA"&&w.scrollHeight>w.clientHeight&&((w.scrollTop===0&&v.directionY===-1)||(w.scrollTop===w.scrollHeight-w.clientHeight&&v.directionY===1))){v._end(x,true);return false}return true},_start:function(z){var y=this;var w=z.touches||[z];if(y.options.zoom&&w.length>1){y.s="preZoom";y.scroller.style[t.TFO]="0 0";var x=f.abs(w[0].pageX-w[1].pageX);var v=f.abs(w[0].pageY-w[1].pageY);y._z.spacing=f.sqrt(x*x+v*v);y._z.startScale=y._z.scale;y.originX=(w[0].pageX-w[1].pageX)/2+w[1].pageX-(t.computePosition(y.scroller,j.body).left+t.computeTranslate(y.scroller,j.body).x);y.originY=(w[0].pageY-w[1].pageY)/2+w[1].pageY-(t.computePosition(y.scroller,j.body).top+t.computeTranslate(y.scroller,j.body).y);y._execEvent("zoomStart",z);return}if(y.options.scrollBarFade){y.fading=false;if(y.scrollBarX){y.scrollBarX.style.opacity=1}if(y.scrollBarY){y.scrollBarY.style.opacity=1}}if(y.options.scrollFree){y._do=y._xy;y.s="scrollFree"}else{if(y.options.scrollX&&y.options.scrollY){y.s="preScroll"}else{if(!y.options.scrollX&&y.options.scrollY){y._do=y._y;y.s="scrollY"}else{if(y.options.scrollX&&!y.options.scrollY){y._do=y._x;y.s="scrollX"}else{y.s=null;return}}}}y.distance=0;y.lastMoveTime=y.startTime=Date.now();y._s.lastX=y.startPositionX=y._s.startX=w[0].pageX;y._s.lastY=y.startPositionY=y._s.startY=w[0].pageY;y._execEvent("scrollStart",z)},_move:function(M){var N=this;var H=M.touches||[M];var A;var D;var C;var G;var F;var J;var I;var w;var z=1;var v=1;if(N.s==="preScroll"||N.s==="scrollX"||N.s==="scrollFree"){D=H[0].pageX}if(N.s==="preScroll"||N.s==="scrollY"||N.s==="scrollFree"){C=H[0].pageY}G=D-N._s.lastX;F=C-N._s.lastY;N._s.lastX=D;N._s.lastY=C;z=G>=0?1:-1;v=F>=0?1:-1;A=Date.now();if(A-N.lastMoveTime>200||N.directionX!==z||N.directionY!==v){N.startTime=A;N.startPositionX=D;N.startPositionY=C;N.directionX=z;N.directionY=v}N.lastMoveTime=A;J=D-N.startPositionX;I=C-N.startPositionY;if(N.s==="preScroll"){if(f.abs(C-N._s.startY)>=f.abs(D-N._s.startX)){N._do=N._y;N.s="scrollY";return}if(f.abs(C-N._s.startY)<f.abs(D-N._s.startX)){N._do=N._x;N.s="scrollX";return}}if(N.s==="scrollY"){N.y=C-N._s.startY+N._s.endY;if(N._yTextarea(M)){N._doScroll(I,M)}return}if(N.s==="scrollX"){N.x=D-N._s.startX+N._s.endX;N._doScroll(J,M);return}if(N.s==="scrollFree"){N.x=D-N._s.startX+N._s.endX;N.y=C-N._s.startY+N._s.endY;w=f.sqrt(J*J+I*I);N.cosX=J/w;N.cosY=I/w;N._doScroll(f.sqrt(J*J+I*I),M);return}if(N.s==="preZoom"){var L=f.abs(H[0].pageX-H[1].pageX);var K=f.abs(H[0].pageY-H[1].pageY);var B=f.sqrt(L*L+K*K);var O=B/N._z.spacing*N._z.startScale;var E;if(O<N.options.zoomMin){O=N.options.zoomMin}else{if(O>N.options.zoomMax){O=N.options.zoomMax}}E=O/N._z.startScale;N.x=f.round(N.originX-N.originX*E+N._s.endX);N.y=f.round(N.originY-N.originY*E+N._s.endY);N._z.scale=O;N._scrollTo(N.x,N.y);N._execEvent("zoom",M);return}},_end:function(z,y){var A=this;var w;var v;var x=Date.now();var D=A.s==="scrollY";var C=A.s==="scrollX";var B=A.s==="scrollFree";if(D||C||B){if(z.touches&&z.touches.length&&!y){return}A._execEvent("touchEnd");p.jrollActive=null;A.duration=x-A.startTime;w=A.y>A.minScrollY||A.y<A.maxScrollY;v=A.x>A.minScrollX||A.x<A.maxScrollX;if((D&&w)||(C&&v)||(B&&(w||v))){A.scrollTo(A.x,A.y,300)._endAction()}else{if(A.options.momentum&&A.duration<200&&A.distance){A.speed=f.abs(A.distance/A.duration);A.speed=A.speed>2?2:A.speed;A.moving=true;m(A._step.bind(A,x))}else{A._endAction()}}return}if(A.s==="preZoom"){A._execEvent("touchEnd");p.jrollActive=null;if(A._z.scale>A.options.zoomMax){A._z.scale=A.options.zoomMax}else{if(A._z.scale<A.options.zoomMin){A._z.scale=A.options.zoomMin}}A.refresh();A.scrollTo(A.x,A.y,A.options.zoomDuration);A._execEvent("zoomEnd");return}}};if(typeof module!=="undefined"&&module.exports){module.exports=p}if(typeof define==="function"){define(function(){return p})}d.JRoll=p})(window,document,Math);